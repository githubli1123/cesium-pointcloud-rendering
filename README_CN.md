# ç‚¹äº‘æ¸²æŸ“æŠ€æœ¯ä»»åŠ¡

æœ¬é¡¹ç›®å®ç°äº†ä»åŸå§‹ç‚¹äº‘æ•°æ®ï¼ˆPLYï¼‰åˆ° 3D Tiles çš„å®Œæ•´å¤„ç†ã€åˆ‡ç‰‡ä¸å¯è§†åŒ–æµç¨‹ï¼Œæ”¯æŒæœ¬åœ°ä¸äº‘ç«¯éƒ¨ç½²ï¼ŒåŒ…å«æµ‹é‡ã€è£å‰ªã€ä¸Šè‰²ç­‰åŠŸèƒ½æ¨¡å—ã€‚
é¡¹ç›®åŸºäº Cesiumï¼Œæ•°æ®è½¬æ¢å’Œåˆ‡ç‰‡å…¨éƒ¨é€šè¿‡è„šæœ¬è‡ªåŠ¨åŒ–å®Œæˆã€‚

## â±ï¸ å¼€å‘æ—¶é—´ç»Ÿè®¡

| é˜¶æ®µ                                         | ç”¨æ—¶    |
| -------------------------------------------- | ------- |
| MVP åŸºç¡€ç‰ˆæœ¬ï¼ˆæ•°æ®é¢„å¤„ç†ã€æœ¬åœ°è¿è¡ŒåŸºç¡€åŠŸèƒ½ï¼‰ | 10h     |
| äº‘ç«¯éƒ¨ç½²ã€ä¿®å¤ BUGã€å®Œå–„åŠŸèƒ½ã€æ’°å†™ README    | 13h     |
| **æ€»è®¡**                                     | **23h** |

AI ç”Ÿæˆä»£ç å¹¶ä¸”  code review åŒ…å«ï¼š ç›¸å…³ DOM ç»“æ„ä»£ç ï¼Œç›¸å…³ TS ç±»å‹çš„è¡¥å…¨å’Œçº æ­£ï¼Œç›¸å…³å‘½åçš„ä¿®æ­£ï¼Œå¯¹ç›¸å…³åŠŸèƒ½çš„è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä»¥æé«˜æ¸…æ™°åº¦å’Œå¯ç»´æŠ¤æ€§ç­‰ç­‰ã€‚





## ğŸ§© æ•°æ®é¢„å¤„ç†ä¸åˆ‡ç‰‡æ–¹æ³•

æ•´ä¸ªè¿‡ç¨‹æ— éœ€ GUI è½¯ä»¶ï¼Œå…¨éƒ¨é€šè¿‡è„šæœ¬å®ç°ï¼Œå¯å®Œæ•´å¤ç°ã€‚

### 1) PLY â†’ å±€éƒ¨åæ ‡ç³» LAS

```bash
python ply_to_local.py input.ply -o local.las
```

> æ³¨æ„ï¼šRGB å€¼éœ€æ˜ å°„åˆ° **0 ~ 256** èŒƒå›´ï¼ˆå¸¸è§„å®ç°ä¸º 0â€“255 çš„ uint8ï¼‰ã€‚

### 2) LASï¼ˆå±€éƒ¨ï¼‰ â†’ ECEF åæ ‡ç³»

```bash
python local_ply_2_ecef_las.py   --input local.las   --output ecef.las   --lon 116.4075 --lat 39.9040 --height 1.0
```

### 3) LAS/LAZ â†’ 3D Tiles åˆ‡ç‰‡

å®‰è£…ä¾èµ–ï¼š

```bash
pip install py3dtiles
```

æ‰§è¡Œåˆ‡ç‰‡ï¼ˆLAS æˆ– LAZ éƒ½å¯ï¼‰ï¼š

```bash
# è‹¥ä½ æœ‰ ecef.lasï¼š
py3dtiles convert ecef.las --out tiles --jobs 12

# è‹¥å·²æœ‰ LAZï¼ˆç¤ºä¾‹åï¼‰ï¼š
py3dtiles convert pointcloud_wgs84.laz --out tiles --jobs 12
```

> è¯´æ˜ï¼špy3dtiles æ”¯æŒ API å½¢å¼è°ƒç”¨ï¼Œå¯è‡ªå®šä¹‰åˆ‡ç‰‡ç­–ç•¥ã€‚

#### æ ¡éªŒ Tiles

```bash
npx 3d-tiles-validator --tilesetFile tiles/tileset.json
```

> âš ï¸ å®æµ‹ï¼šåˆ‡ç‰‡å®Œæˆåéœ€å°† `points` æ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰ **.json** æ–‡ä»¶æ‹·è´åˆ°ä¸ `tileset.json` åŒçº§ç›®å½•ï¼Œå¦åˆ™æµè§ˆå™¨åŠ è½½ä¼šæŠ¥è·¯å¾„é”™è¯¯ï¼š
>
> ```bash
> cp tiles/points/*.json tiles/
> ```

---



## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Node.js 18+
- npm ã€ yarn ã€ pnpm

### å®‰è£…ä¾èµ–

```bash
npm install
```

### é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
VITE_CESIUM_TOKEN=your_cesium_ion_token
VITE_3DTILES_BASE=your_3dtiles_url
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
npm run build
```



## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ

- **Vue 3** - å‰ç«¯æ¡†æ¶
- **Cesium 1.134.1** - 3D åœ°çƒå’Œå¯è§†åŒ–å¼•æ“
- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript
- **Vite** - ç°ä»£åŒ–æ„å»ºå·¥å…·

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ components/           # Vue ç»„ä»¶
â”‚   â””â”€â”€ CesiumViewer.vue # ä¸»è§†å›¾ç»„ä»¶
â”œâ”€â”€ cesium/              # Cesium ç›¸å…³é€»è¾‘
â”‚   â”œâ”€â”€ map.ts          # åœ°å›¾åˆå§‹åŒ–
â”‚   â”œâ”€â”€ mapConfig.ts    # åœ°å›¾é…ç½®
â”‚   â””â”€â”€ tools/          # å·¥å…·ç±»
â”‚       â”œâ”€â”€ measureTool.ts    # æµ‹é‡å·¥å…·
â”‚       â”œâ”€â”€ colorMode.ts      # é¢œè‰²æ¨¡å¼æ§åˆ¶
â”‚       â””â”€â”€ clippingTool.ts   # è£å‰ªå·¥å…·
â”œâ”€â”€ assets/             # é™æ€èµ„æº
â”œâ”€â”€ App.vue            # æ ¹ç»„ä»¶
â””â”€â”€ main.ts            # åº”ç”¨å…¥å£
```



# äº‘ç«¯éƒ¨ç½²æŒ‡å—

## ğŸŒ éƒ¨ç½²æ¶æ„

**è…¾è®¯äº‘æœåŠ¡ç»„åˆ**ï¼šCOS + CDN + åŸŸå

## ğŸ’° æˆæœ¬æ¦‚è§ˆ

- **æ€»èŠ±è´¹**ï¼š5ç¾å…ƒ
- **åŒ…å«æœåŠ¡**ï¼šCOSå­˜å‚¨ + CDNåŠ é€Ÿ + åŸŸåè§£æ

## ğŸš€ éƒ¨ç½²æµç¨‹

### 1. æœåŠ¡è´­ä¹°
è´­ä¹°è…¾è®¯äº‘æœåŠ¡ï¼š
- COSï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰
- CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰
- åŸŸå

### 2. åˆ›å»ºå­˜å‚¨æ¡¶
åˆ›å»ºCOSå­˜å‚¨æ¡¶ï¼Œè®¾ç½®æƒé™ï¼šç§æœ‰è¯»ç§æœ‰å†™

### 3. ä¸Šä¼ 3D Tilesæ•°æ®
å°†åˆ‡ç‰‡å¥½çš„3D Tileså‹ç¼©åŒ…ä¸Šä¼ åˆ°COSï¼›åœ¨COSæ§åˆ¶å°è¿›è¡Œè§£å‹æ“ä½œï¼›è·å–tileset.jsonçš„å‘å¸ƒåœ°å€

### 4. é…ç½®CORS
åœ¨COSé…ç½®é¡µé¢è®¾ç½®CORSï¼Œåªå…è®¸è‡ªå·±çš„åŸŸåè®¿é—®

### 5. éƒ¨ç½²å‰ç«¯åº”ç”¨
æ„å»ºé¡¹ç›®ï¼šnpm run build åå°†distæ–‡ä»¶å¤¹ä¸Šä¼ åˆ°CDN Pageï¼Œè‡ªåŠ¨éƒ¨ç½²åè·å¾—è®¿é—®åœ°å€

### 6. åŸŸåé…ç½®
è¿›å…¥åŸŸåé…ç½®é¡µé¢ï¼Œå°†CNAMEä¸‹çš„@è§£æä¸ºCDNåœ°å€

### 7. CDNé…ç½®
- é™æ€èµ„æºç¼“å­˜30å¤©ï¼Œ3D Tilesç¼“å­˜7å¤©ï¼ŒHTMLç¼“å­˜1å°æ—¶
- å¯ç”¨Gzipå‹ç¼©ï¼Œå¯ç”¨HTTP/2

## ğŸ“ˆ ç›‘æ§ä¸ç»´æŠ¤

### è®¿é—®ç»Ÿè®¡
- COSè®¿é—®æ—¥å¿—åˆ†æ
- CDNæµé‡ç›‘æ§
- é”™è¯¯ç‡ç»Ÿè®¡

### æˆæœ¬æ§åˆ¶
- ç›‘æ§å­˜å‚¨ä½¿ç”¨é‡
- è·Ÿè¸ªCDNæµé‡æ¶ˆè€—

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **CORSé”™è¯¯**ï¼šæ£€æŸ¥åŸŸåé…ç½®
2. **3D TilesåŠ è½½å¤±è´¥**ï¼šéªŒè¯tileset.jsonè·¯å¾„
3. **CDNç¼“å­˜é—®é¢˜**ï¼šåˆ·æ–°CDNç¼“å­˜

## ğŸ“ éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] COSå­˜å‚¨æ¡¶åˆ›å»º
- [ ] 3D Tilesæ•°æ®ä¸Šä¼ 
- [ ] CORSé…ç½®å®Œæˆ
- [ ] å‰ç«¯é¡¹ç›®æ„å»º
- [ ] CDN Pageéƒ¨ç½²
- [ ] åŸŸåè§£æé…ç½®
- [ ] åŠŸèƒ½æµ‹è¯•éªŒè¯
- [ ] æ€§èƒ½ç›‘æ§è®¾ç½®

---

**éƒ¨ç½²å®Œæˆåï¼Œæ‚¨çš„3Dç‚¹äº‘åº”ç”¨å°†é€šè¿‡CDNå…¨çƒåŠ é€Ÿï¼Œæä¾›å¿«é€Ÿç¨³å®šçš„è®¿é—®ä½“éªŒã€‚**





## ğŸš€ åŠŸèƒ½ä»‹ç»

### 1. æµ‹é‡åŠŸèƒ½ï¼ˆç‚¹åˆ°ç‚¹è·ç¦»ï¼‰

æ”¯æŒå¤šç§æµ‹é‡æ¨¡å¼å’Œç²¾ç¡®çš„ç‚¹äº‘å¸é™„åŠŸèƒ½ï¼š

#### æµ‹é‡æ¨¡å¼
- **3D ç›´çº¿è·ç¦»**ï¼šè®¡ç®—ä¸¤ç‚¹é—´çš„ä¸‰ç»´ç©ºé—´ç›´çº¿è·ç¦»
- **åœ°è¡¨å¼§çº¿è·ç¦»**ï¼šæ²¿åœ°çƒè¡¨é¢çš„æœ€çŸ­è·¯å¾„è·ç¦»

#### ç‚¹äº‘å¸é™„ç³»ç»Ÿ

ğŸª²BUGï¼šç›®å‰æ­¤é¡¹åŠŸèƒ½è¿˜æ˜¯æ— æ³•å®Œå…¨åšåˆ°ï¼Œæ—¶æœ‰ bug å‘ç”Ÿï¼Œæ­£åœ¨è¿›è¡Œä¿®å¤ã€‚ç›®å‰å¯ä»¥ä» pickFromRayMostDetailed è¿™æ ·çš„æœªå…¬å¼€ API å‡ºå‘å¼€å§‹åšã€‚

ä»£ç æ–‡ä»¶åœ¨ `measureTool_other_version.ts`

æä¾›å››ç§ä¸åŒçš„äº¤äº’æ¨¡å¼ï¼š

1. **å…³é—­ Just 3D Tiles/CloudPoint + å…³é—­ Point Cloud Snapping**
   - ä»…é€‰æ‹©åœ°è¡¨ä¸Šçš„ç‚¹
   - é€‚åˆåœ°è¡¨æµ‹é‡
2. **å…³é—­ Just 3D Tiles/CloudPoint + å¼€å¯ Point Cloud Snapping**
   - å¯ä»¥é¢„è§ˆå¸é™„çš„ç‚¹äº‘ç‚¹
   - æ”¯æŒåœ°è¡¨å’Œç‚¹äº‘æ··åˆæµ‹é‡
3. **å¼€å¯ Just 3D Tiles/CloudPoint + å…³é—­ Point Cloud Snapping**
4. **å¼€å¯ Just 3D Tiles/CloudPoint + å¼€å¯ Point Cloud Snapping**
   - æ™ºèƒ½ç‚¹äº‘å¸é™„
   - é¢„è§ˆå¸é™„ç‚¹ï¼ˆå°é»„ç‚¹æ˜¾ç¤ºï¼‰
   - æ”¯æŒåƒç´ åŠå¾„å†…çš„åå­—+åœ†ç¯é‡‡æ ·

ä¸ºäº†è§£å†³ BUGï¼Œæˆ‘é‡‡å–äº†è¿™æ ·çš„æ–¹å¼ï¼š **Startâ†’å¯ç”¨ attenuation/EDLï¼›ç»“æŸ/å–æ¶ˆâ†’æ¢å¤**ã€‚

#### å¸é™„æŠ€æœ¯ç»†èŠ‚
- **è¯¯å·®è®¡ç®—**ï¼šé€šè¿‡åƒç´ åŠå¾„å†…çš„å¤šç‚¹é‡‡æ ·ç¡®ä¿ç²¾ç¡®å¸é™„
- **é¢„è§ˆåŠŸèƒ½**ï¼šé¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤ºå¸é™„é¢„è§ˆç‚¹
- **æ€§èƒ½ä¼˜åŒ–**ï¼šå¸é™„å¤±æ•ˆæ—¶é¿å…æ¯å¸§è®¡ç®—ï¼Œå‡å°‘å¡é¡¿ã€‚**ä½†æ˜¯ç›®å‰çš„ä»£ç ä»»ç„¶æœ‰ä¼˜åŒ–ç©ºé—´**

### 2. æ¡†é€‰/å¤šè¾¹å½¢è£å‰ª

æ”¯æŒä¸¤ç§è£å‰ªæ–¹å¼ï¼Œæ»¡è¶³ä¸åŒçš„æ•°æ®å±•ç¤ºéœ€æ±‚ï¼š

#### çŸ©å½¢æ¡†é€‰
- åœ¨æµè§ˆå™¨è§†å£ä¸Šç»˜åˆ¶çŸ©å½¢æ¡†
- è‡ªåŠ¨æ˜ å°„åˆ°åœ°çƒè¡¨é¢å½¢æˆçƒé¢çŸ©å½¢
- æ”¯æŒè§†é”¥ä½“æŠ•å½±ï¼Œè‡ªåŠ¨å¤„ç†åœ°çƒèƒŒé¢äº¤ç‚¹

#### å¤šè¾¹å½¢è£å‰ª
- åœ¨åœ°çƒè¡¨é¢ç»˜åˆ¶ä»»æ„å¤šè¾¹å½¢
- æ”¯æŒå¤æ‚å½¢çŠ¶çš„ç²¾ç¡®è£å‰ª
- å®æ—¶é¢„è§ˆè£å‰ªåŒºåŸŸ

### 3. é¢œè‰²æ¨¡å¼åˆ‡æ¢

ä¸ºç‚¹äº‘æä¾›ä¸¤ç§ä¸Šè‰²æ¨¡å¼ï¼š

#### RGB æ¨¡å¼
- ä½¿ç”¨ç‚¹äº‘åŸå§‹çš„ RGB é¢œè‰²ä¿¡æ¯
- çœŸå®è¿˜åŸç‚¹äº‘å¤–è§‚

#### é«˜ç¨‹æ¨¡å¼
- åŸºäºç‚¹äº‘é«˜åº¦å€¼è¿›è¡Œé¢œè‰²æ˜ å°„
- æä¾› 16 çº§é«˜ç¨‹è‰²å½©æ–¹æ¡ˆï¼š
  - æ·±æµ·è“ â†’ æµ·è“ â†’ ä½åœ°ç»¿ â†’ è‰åœ°ç»¿
  - é»„ç»¿è¿‡æ¸¡ â†’ æ²™é»„ â†’ æ©™è‰²ä¸˜é™µ â†’ æ©™çº¢
  - çº¢è‰²å±±åœ° â†’ çº¢ç´«å±±è„Š â†’ ç´«è‰²é«˜åŸ â†’ ç´«ç²‰
  - æµ…ç´«é›ªçº¿ â†’ æ·¡è“é›ªé¢ â†’ é›ªé¡¶

### 4. 3D Tiles è°ƒè¯•é¢æ¿

é›†æˆ Cesium å®˜æ–¹è°ƒè¯•å·¥å…·ï¼š

- **å…«å‰æ ‘å¯è§†åŒ–**ï¼šæ˜¾ç¤º Bounding Volumes ç»“æ„
- **Freeze Frame**ï¼šå†»ç»“å½“å‰å¸§è¿›è¡Œè¯¦ç»†åˆ†æ
- **æ€§èƒ½ç›‘æ§**ï¼šå®æ—¶æ˜¾ç¤º FPS å’Œæ¸²æŸ“ç»Ÿè®¡
- **å±‚çº§è°ƒè¯•**ï¼šæŸ¥çœ‹ä¸åŒ LOD çº§åˆ«çš„åŠ è½½æƒ…å†µ



## ğŸ“– ä½¿ç”¨æŒ‡å—

### æµ‹é‡åŠŸèƒ½ä½¿ç”¨

1. **å¯åŠ¨æµ‹é‡**
   - ç‚¹å‡»å·¥å…·æ ä¸­çš„ "Start" æŒ‰é’®
   - é€‰æ‹©æµ‹é‡æ¨¡å¼ï¼ˆ3D Line / Surface Lineï¼‰

2. **é…ç½®å¸é™„é€‰é¡¹**
   - **Point Cloud Snapping**ï¼šå¼€å¯ç‚¹äº‘å¸é™„é¢„è§ˆ
   - **Just 3D Tiles/CloudPoint**ï¼šé™åˆ¶åªèƒ½é€‰æ‹©ç‚¹äº‘ç‚¹
   - **Snapping Radius**ï¼šè°ƒæ•´å¸é™„åŠå¾„ï¼ˆ2-30åƒç´ ï¼‰

3. **è¿›è¡Œæµ‹é‡**
   - å·¦é”®ç‚¹å‡»è®¾ç½®èµ·ç‚¹
   - å·¦é”®ç‚¹å‡»è®¾ç½®ç»ˆç‚¹
   - å³é”®æˆ– ESC å–æ¶ˆå½“å‰æµ‹é‡

4. **ç®¡ç†æµ‹é‡ç»“æœ**
   - ç‚¹å‡» "Clear" æ¸…ç©ºæ‰€æœ‰æµ‹é‡ç»“æœ
   - æµ‹é‡ç»“æœä¼šæŒä¹…æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Š

### è£å‰ªåŠŸèƒ½ä½¿ç”¨

1. **çŸ©å½¢è£å‰ª**
   - ç‚¹å‡» "Start Rectangular Clipping"
   - æ‹–æ‹½é¼ æ ‡ç»˜åˆ¶çŸ©å½¢æ¡†
   - æ¾å¼€é¼ æ ‡å®Œæˆè£å‰ª

2. **å¤šè¾¹å½¢è£å‰ª**
   - ç‚¹å‡» "Start Polygon Clipping"
   - å·¦é”®ç‚¹å‡»æ·»åŠ å¤šè¾¹å½¢é¡¶ç‚¹
   - å³é”®å®Œæˆå¤šè¾¹å½¢ç»˜åˆ¶

3. **è£å‰ªæ§åˆ¶**
   - "Reverse Clipping"ï¼šåè½¬è£å‰ªåŒºåŸŸï¼ˆæ˜¾ç¤ºå¤–éƒ¨/å†…éƒ¨ï¼‰
   - "Clear Clipping"ï¼šæ¸…é™¤æ‰€æœ‰è£å‰ªæ•ˆæœ

### é¢œè‰²æ¨¡å¼åˆ‡æ¢

1. ä½¿ç”¨å·¦ä¸Šè§’çš„é¢œè‰²æ¨¡å¼ä¸‹æ‹‰èœå•
2. é€‰æ‹© "RGB" æˆ– "Height" æ¨¡å¼
3. å®æ—¶æŸ¥çœ‹ç‚¹äº‘é¢œè‰²å˜åŒ–





## ğŸ”® æœªæ¥è§„åˆ’

### 3D Tiles åˆ‡ç‰‡ä¼˜åŒ–

- ä½“ç§¯ä¼˜åŒ–ï¼š**LAZ è¾“å…¥ã€Draco æŒ‰éœ€**ã€‚æºæ•°æ® LAZ é™ IOï¼›å‘å¸ƒç«¯å¯¹ç¨³å®šæ•°æ®å¯ç”¨ Dracoï¼ˆç§»åŠ¨å¼±ç½‘æ”¶ç›Šå¤§ï¼‰ï¼Œæ³¨æ„ Web Worker è§£ç ã€‚

- æ€§èƒ½ä¼˜åŒ–ï¼š**å…«å‰æ ‘/å››å‰æ ‘ + éšå¼åˆ‡ç‰‡ (Implicit Tiling)**ã€‚å¤§è§„æ¨¡ç‚¹äº‘ç”¨éšå¼ç´¢å¼•ï¼ˆsubtreeï¼‰é™ `tileset.json` ä½“ç§¯ä¸è§£ææˆæœ¬ã€‚
- æ•°æ®æºå¤´ä¼˜åŒ–ï¼š**ä½“ç´ é‡‡æ ·ï¼ˆVoxel Gridï¼‰åˆ†å±‚**ã€‚æ ¹å±‚ä½“ç´ å¤§ã€åº•å±‚ä½“ç´ å°ï¼›åŒå±‚å†…åšå¯†åº¦å‡è¡¡ï¼Œé™ä½â€œèŠ±æ–‘â€ã€‚å¯å åŠ **è“å™ªå£°/æ³Šæ¾ç›˜**ç»´æŒè§†è§‰å‡åŒ€ã€‚
- è§‚æ„Ÿä¼˜åŒ–ï¼š**æ³•å‘é‡/æ›²ç‡**ã€‚ä¼°è®¡å±€éƒ¨æ³•çº¿/æ›²ç‡ï¼Œåç»­ç”¨äº EDLã€ç‚¹å°ºå¯¸è‡ªé€‚åº”æˆ–åˆ†å±‚ä¸Šè‰²ã€‚

### æ‹¾å–/å¸é™„ä¸äº¤äº’ä¼˜åŒ–

- **ä¸¤çº§å¸é™„ï¼šå±å¹•å€™é€‰ â†’ 3D æœ€è¿‘é‚»**ã€‚å…ˆç”¨åƒç´ åŠå¾„ï¼ˆ4â€“8pxï¼‰ç­›å€™é€‰ï¼Œå†åšä¸‰ç»´æœ€è¿‘é‚»ï¼›å‘½ä¸­é˜ˆå€¼/å›é€€ç­–ç•¥å¯é…ç½®ã€‚
- **ID Buffer / é€‰æ‹©ç¼“å†²**ã€‚ç¦»çº¿æ¸²æŸ“ç‚¹ ID åˆ°ç¼“å†²ï¼ŒO(1) æ‹¾å–ï¼›å¤§å¹…é™ä½ move äº‹ä»¶è®¡ç®—æˆæœ¬ã€‚
- **èŠ‚æµä¸é™è´¨é¢„è§ˆ**ã€‚é¼ æ ‡ç§»åŠ¨ 30â€“50ms èŠ‚æµï¼›æœªå¸é™„çŠ¶æ€ä¸å®æ—¶æ›´æ–°è·ç¦»æ–‡æœ¬ï¼Œåªç”»è½»é‡å¯¼çº¿ã€‚
- **ç¼–è¾‘ä¸å†å²**ã€‚ç»“æ„åŒ–ä¿å­˜ `start/end/line/label`ï¼Œæ”¯æŒå•æ¡åˆ é™¤ã€ç«¯ç‚¹æ‹–æ‹½ã€ä¼šè¯å­˜å–ã€‚

### åŠŸèƒ½å¢å¼º

- **å¤šç‚¹æµ‹é‡**ï¼šæ”¯æŒå¤šç‚¹è¿çº¿æµ‹é‡
-  **æµ‹é‡ç»“æœå¯¼å‡º**ï¼šæ”¯æŒå¯¼å‡ºæµ‹é‡æ•°æ®

### å¯è§†åŒ–å¢å¼º
- **è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆ**ï¼šæ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é«˜ç¨‹é¢œè‰²
- **åŠ¨ç”»æ•ˆæœ**ï¼šæµ‹é‡è¿‡ç¨‹åŠ¨ç”»
- **æ ‡ç­¾æ ·å¼**ï¼šå¯è‡ªå®šä¹‰æµ‹é‡æ ‡ç­¾æ ·å¼

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®éœ€è¦æœ‰æ•ˆçš„ Cesium Ion Token å’Œ 3D Tiles æ•°æ®æºæ‰èƒ½æ­£å¸¸è¿è¡Œã€‚è¯·ç¡®ä¿åœ¨ç¯å¢ƒå˜é‡ä¸­æ­£ç¡®é…ç½®ç›¸å…³å‚æ•°ã€‚



## æŠ€æœ¯å¼€å‘å®è·µ

### ğŸ¯ æ ¸å¿ƒè®¾è®¡ç†å¿µ

**"æœ€å¥½çš„æ¸²æŸ“ç­–ç•¥å°±æ˜¯ä¸æ¸²æŸ“"**

é€šè¿‡å¤šå±‚æ¬¡ä¼˜åŒ–ç­–ç•¥å®ç°é«˜æ€§èƒ½3Dç‚¹äº‘æ¸²æŸ“ï¼šåªæ¸²æŸ“"ç›¸æœºå¯è§ä¸”å¿…è¦çš„æœ€å°‘é›†åˆ"ã€‚


### ç©ºé—´å±‚é¢
- **Frustum Culling**ï¼šå‰”é™¤è§†é”¥å¤–çš„ç“¦ç‰‡
- **Occlusion Culling**ï¼šå‰”é™¤è¢«é®æŒ¡å¯¹è±¡
- **LODç­–ç•¥**ï¼šè·ç¦»è¶Šè¿œï¼Œç²¾åº¦è¶Šä½

### æ„ŸçŸ¥å±‚é¢
- **å¯æ„ŸçŸ¥å·®å¼‚æ§åˆ¶**ï¼šåªç»†åŒ–åˆ°è‚‰çœ¼èƒ½åŒºåˆ†çš„è¯¯å·®èŒƒå›´
- **åŠ¨æ€LOD**ï¼šåŸºäºè·ç¦»å’Œå±å¹•å æ¯”è°ƒæ•´ç»†èŠ‚çº§åˆ«

## ğŸ› ï¸ 3D Tiles åˆ†å—ç­–ç•¥

```typescript
const tileset = new Cesium.Cesium3DTileset({
  maximumScreenSpaceError: 16,  // å±å¹•ç©ºé—´è¯¯å·®é˜ˆå€¼
  skipLevelOfDetail: true,      // è·³è¿‡LODçº§åˆ«
  immediatelyLoadDesiredLevelOfDetail: false, // å»¶è¿ŸåŠ è½½
  cullWithChildrenBounds: true  // ä½¿ç”¨å­è¾¹ç•Œè¿›è¡Œå‰”é™¤
});
```

## ğŸ”§ é”™è¯¯å¤„ç†ä¸æ—¥å¿—

### å‚æ•°éªŒè¯
```typescript
constructor(viewer: Cesium.Viewer, options: MeasureToolOptions = {}) {
  if (!viewer || !(viewer instanceof Cesium.Viewer)) {
    throw new Error('Invalid viewer parameter');
  }
  this._snapRadiusPx = Math.max(2, Math.min(30, options.snapRadiusPx ?? 16));
}
```

### å¼‚å¸¸å¤„ç†
```typescript
try {
  const tileset = await Cesium.Cesium3DTileset.fromUrl(url);
  return tileset;
} catch (error) {
  console.error("âŒ ç‚¹äº‘åŠ è½½å¤±è´¥:", error);
  throw new Error(`Point cloud load failed: ${error.message}`);
}
```

## ğŸŒ ç¯å¢ƒé…ç½®

### å¼€å‘ç¯å¢ƒ
```typescript
// .env.development
VITE_3DTILES_BASE=http://localhost:8080/tiles
VITE_DEBUG_MODE=true
```

### ç”Ÿäº§ç¯å¢ƒ
```typescript
// .env.production
VITE_3DTILES_BASE=https://cdn.example.com/tiles
VITE_DEBUG_MODE=false
```

## ğŸ’¡ å¼€å‘æœ€ä½³å®è·µ

### 1. é¿å…ç¡¬ç¼–ç 
```typescript
// âœ… ä½¿ç”¨å¸¸é‡
export const MEASURE_CONFIG = {
  DEFAULT_SNAP_RADIUS: 16,
  MAX_SNAP_RADIUS: 30,
  MIN_SNAP_RADIUS: 2
} as const;
```

### 2. é€»è¾‘å¤ç”¨
```typescript
// çŸ©å½¢å’Œå¤šè¾¹å½¢éƒ½å¤ç”¨æ­¤æ–¹æ³•
public applyClippingPolygons(polygonsPositions: Cesium.Cartesian3[][]): void {
  // é€šç”¨è£å‰ªé€»è¾‘
}
```

### 3. è¾¹ç•Œæ¡ä»¶å¤„ç†
```typescript
// å¤šé‡å›é€€ç­–ç•¥
let position = scene.globe.pick(ray, scene);
if (!position) {
  position = camera.pickEllipsoid(screenPos, scene.globe.ellipsoid);
}
// æœ‰æ•ˆæ€§æ£€æŸ¥
if (position && !isNaN(position.x) && Cesium.Cartesian3.magnitude(position) > 0) {
  return position;
}
```

### 4. TypeScript ç±»å‹å®‰å…¨
```typescript
export type MeasureMode = "3d" | "surface" | "surface+height";
export interface MeasureToolOptions {
  mode?: MeasureMode;
  snapRadiusPx?: number;
}
```

---

é€šè¿‡è¿™äº›å®è·µï¼Œå®ç°äº†é«˜æ€§èƒ½ã€å¯ç»´æŠ¤çš„3Dç‚¹äº‘å¤„ç†åº”ç”¨ã€‚



## ğŸ”§å·¥å…·ç±»è„šæœ¬

æŸ¥çœ‹ las æ ¼å¼æ•°æ®çš„ç‚¹æ•°æ®

```
python tool_look_las.py ./your_file.las
```

æŸ¥çœ‹ ply æ ¼å¼æ•°æ®çš„ç‚¹æ•°æ®

```
python tool_look_ply.py  ./your_file.ply
```



## ğŸ¤”æ”¶è·

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘è¿˜æ¥è§¦åˆ°äº†å…¶ä»–ä¸œè¥¿ï¼š

CloudCompareã€ Entwineã€ PDALã€ CesiumLabã€ 3DTiles Tools ç­‰ç­‰ï¼Œä¸ä¸€ä¸€åˆ—ä¸¾äº†



